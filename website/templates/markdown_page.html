<!DOCTYPE html>
<html lang="en">

<head>
    {% include 'default.html' %}
    <meta property="og:title" content="{{ title }}">
    <meta property="og:url" content="https://habtrack.vercel.app{{ url }}">
    <meta property="og:description" content="About the Hab Track project">
    <meta property="og:image" content="https://hab-track.vercel.app/img/banner.png">

    <link rel="stylesheet" href="/static/css/markdown.css">
</head>

<body>
    <div class="container">
        <div class="sidebar">
            <h3>Contents</h3>
            <div class="toc" id="toc">
                <!-- Table of contents will be generated by JavaScript -->
            </div>
        </div>

        <div class="content markdown-body">
            {{ content|safe }}
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Generate table of contents
            const headings = document.querySelectorAll('.markdown-body h2, .markdown-body h3');
            const toc = document.getElementById('toc');
            const tocList = document.createElement('ul');
            
            let currentLevel2 = null;
            let currentLevel2List = null;
            
            headings.forEach(heading => {
                const id = heading.textContent.toLowerCase().replace(/[^\w]+/g, '-');
                heading.id = id;
                
                const link = document.createElement('a');
                link.href = '#' + id;
                link.textContent = heading.textContent;
                
                if (heading.tagName === 'H2') {
                    const listItem = document.createElement('li');
                    listItem.appendChild(link);
                    tocList.appendChild(listItem);
                    
                    currentLevel2 = listItem;
                    currentLevel2List = null;
                } else if (heading.tagName === 'H3' && currentLevel2) {
                    if (!currentLevel2List) {
                        currentLevel2List = document.createElement('ul');
                        currentLevel2.appendChild(currentLevel2List);
                    }
                    
                    const listItem = document.createElement('li');
                    listItem.appendChild(link);
                    currentLevel2List.appendChild(listItem);
                }
            });
            
            toc.appendChild(tocList);
        });
    </script>
</body>

</html>